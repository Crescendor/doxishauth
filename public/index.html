<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kick / Discord Abonelik Doğrulama</title>
    <meta name="description" content="Kick ve Discord Abonelik Doğrulama Sistemi" />
    <link rel="icon" href="/favicon.ico" />

    <style>
        :root {
            --bg: #0b0f17;
            --card: rgba(255,255,255,0.06);
            --glass: rgba(255,255,255,0.08);
            --border: rgba(255,255,255,0.12);
            --text: #e5e7eb;
            --muted: #a1a1aa;
            --primary: #22c55e;
            --danger: #ef4444;
            --warn: #f59e0b;
        }

        * { box-sizing: border-box; }
        html, body { height: 100%; }
        body {
            margin: 0;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            background: radial-gradient(1200px 800px at 20% 10%, rgba(56,189,248,0.08), transparent),
                        radial-gradient(1000px 600px at 80% 30%, rgba(34,197,94,0.08), transparent),
                        linear-gradient(180deg, #0b0f17 0%, #0a0e16 100%);
            color: var(--text);
        }

        .container { max-width: 1100px; margin: 0 auto; padding: 24px; }

        /* Glass / Card */
        .glass-card {
            background: var(--glass);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
        }
        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 16px;
        }

        /* Controls */
        .btn {
            border: 1px solid var(--border);
            background: rgba(255,255,255,0.06);
            color: var(--text);
            padding: 10px 14px;
            border-radius: 12px;
            cursor: pointer;
            transition: transform .06s ease, background .15s ease, border-color .15s ease;
        }
        .btn:hover {
            background: rgba(255,255,255,0.12);
            border-color: rgba(255,255,255,0.22);
        }
        .btn-press:active { transform: translateY(1px); }

        .btn-primary { background: rgba(34,197,94,0.14); border-color: rgba(34,197,94,0.38); }
        .btn-primary:hover { background: rgba(34,197,94,0.22); border-color: rgba(34,197,94,0.6); }

        .btn-danger { background: rgba(239,68,68,0.14); border-color: rgba(239,68,68,0.38); }
        .btn-danger:hover { background: rgba(239,68,68,0.22); border-color: rgba(239,68,68,0.6); }

        .btn-outline { background: transparent; }

        .input, .select {
            width: 100%;
            padding: 10px 12px;
            color: var(--text);
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            border-radius: 12px;
        }

        /* Badges */
        .status-badge {
            font-size: 12px;
            font-weight: 700;
            margin-right: 8px;
            padding: 6px 10px;
            border-radius: 999px;
            display: inline-block;
        }
        .status-badge-red   { background: #3b0b0b; color: #fecaca; }
        .status-badge-green { background: #072b16; color: #bbf7d0; }
        .status-badge-yellow{ background: #3a2a06; color: #fde68a; }

        /* Layout bits */
        header .brand { font-weight: 800; letter-spacing: .3px; }
        .grid { display: grid; gap: 16px; }
        .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
        .grid-3 { grid-template-columns: repeat(3, minmax(0,1fr)); }
        @media (max-width: 860px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }

        /* Modal & Toast */
        .modal { position: fixed; inset: 0; display: none; background: rgba(0,0,0,0.45); }
        .modal.show { display: flex; }
        .modal-content { max-width: 560px; width: 90%; }
        .toast {
            display: none;
            background: rgba(0,0,0,0.7);
            border-color: rgba(255,255,255,0.12);
        }
        .toast.show { display: block; animation: fadein .2s ease; }
        @keyframes fadein { from{opacity:0; transform: translateY(6px)} to{opacity:1; transform: translateY(0)} }

        /* Admin login box */
        .admin-box { max-width: 420px; margin: 0 auto; }

        /* streamer card visuals */
        .hero {
            border-radius: 18px;
            overflow: hidden;
            position: relative;
            border: 1px solid var(--border);
        }
        .hero .bg {
            width: 100%;
            height: 220px;
            background: linear-gradient(145deg, rgba(34,197,94,0.22), rgba(56,189,248,0.22));
            display: block;
        }
        .hero .overlay {
            position: absolute; inset: 0;
            background: linear-gradient(180deg, transparent 40%, rgba(0,0,0,0.35));
        }
        .hero .meta {
            position: absolute; left: 16px; right: 16px; bottom: 12px;
            display: flex; align-items: center; justify-content: space-between;
        }
        .hero .meta .title { font-weight: 800; font-size: 22px; }
        .hero .meta .subtitle { color: var(--muted); font-size: 13px; }

        /* spacer for footer */
        .footer-spacer { height: 110px; }
        .footer-fixed {
            position: fixed; left: 0; right: 0; bottom: 16px;
            display: flex; justify-content: center; pointer-events: none;
        }
        .footer-fixed > * { pointer-events: all; }
    </style>
</head>
<body>
    <header class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
        <div class="brand">kick/discord verify</div>
        <nav style="display:flex;gap:8px;align-items:center;">
            <a class="btn btn-outline btn-press" href="/">Ana Sayfa</a>
            <a class="btn btn-outline btn-press" href="/admin">Admin</a>
        </nav>
    </header>

    <main class="container">
        <!-- STREAMER PAGE -->
        <section id="channel-page" style="display:none;">
            <div id="streamer-card">
                <div class="hero">
                    <div id="hero-bg" class="bg"></div>
                    <div class="overlay"></div>
                    <div class="meta">
                        <div>
                            <div id="streamer-title" class="title">Yayıncı</div>
                            <div id="streamer-subtitle" class="subtitle">Doğrulama için giriş yap</div>
                        </div>
                        <div id="status-container" class="subtitle"></div>
                    </div>
                </div>

                <div class="grid grid-2" style="margin-top:16px;">
                    <div class="card">
                        <h3 style="margin:0 0 12px 0;">Kick Doğrulama</h3>
                        <p class="subtitle" style="margin-top:6px;">Aboneliğini doğrulamak için Kick ile giriş yap.</p>
                        <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
                            <button id="kick-login" class="btn btn-primary btn-press">Kick ile Giriş Yap</button>
                        </div>
                    </div>

                    <div class="card">
                        <h3 style="margin:0 0 12px 0;">Discord (opsiyonel)</h3>
                        <p class="subtitle" style="margin-top:6px;">Discord ile giriş sadece kimlik kontrolü içindir.</p>
                        <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
                            <button id="discord-login" class="btn btn-press">Discord ile Giriş Yap</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin shortcut -->
            <div style="margin-top:16px;">
                <a class="btn btn-outline btn-press" href="/admin">Yayıncı Paneline Git</a>
            </div>
        </section>

        <!-- HOME / LIST PAGE -->
        <section id="home-page" style="display:none;">
            <div class="card">
                <h2 style="margin:0 0 12px 0;">Yayıncılar</h2>
                <div id="streamers-list" class="grid grid-3"></div>
            </div>
        </section>

        <!-- ADMIN PAGE -->
        <section id="admin-page" style="display:none;">
            <div class="grid grid-2">
                <div class="card admin-box">
                    <h2 style="margin:0 0 12px 0;">Admin Girişi</h2>
                    <form id="admin-login-form" class="grid" style="gap:10px;">
                        <input id="admin-password" class="input" type="password" placeholder="Admin şifresi" />
                        <button class="btn btn-primary btn-press" type="submit">Giriş Yap</button>
                    </form>
                    <div id="admin-login-status" class="subtitle" style="margin-top:8px;"></div>
                </div>

                <div class="card">
                    <h2 style="margin:0 0 12px 0;">Yayıncı Ekle</h2>
                    <form id="add-streamer-form" class="grid" style="gap:10px;">
                        <input class="input" name="slug" placeholder="slug (ör: doxish)" required />
                        <input class="input" name="displayText" placeholder="Görünen metin" required />
                        <input class="input" name="discordGuildId" placeholder="Discord Guild ID (opsiyonel)" />
                        <input class="input" name="discordRoleId" placeholder="Discord Role ID (opsiyonel)" />
                        <input class="input" name="discordBotToken" placeholder="Discord Bot Token (opsiyonel)" />
                        <input class="input" name="broadcaster_user_id" placeholder="Kick broadcaster_user_id (opsiyonel)" />
                        <button class="btn btn-primary btn-press" type="submit">Ekle</button>
                    </form>
                </div>
            </div>

            <div class="card" style="margin-top:16px;">
                <h2 style="margin:0 0 12px 0;">Kayıtlı Yayıncılar</h2>
                <div id="streamers-table" class="grid"></div>
            </div>
        </section>
    </main>

    <div class="footer-spacer"></div>
    <div class="footer-fixed pointer-events-none">
        <div class="glass-card text-center text-xs text-gray-400 py-2 px-4 rounded-full pointer-events-auto">
            2025 - Doxish tarafından bu Dünya'da sevgiyle yapıldı. | Discord İletişim: ".doxish"
        </div>
    </div>
    
    <!-- Toast Bildirimi -->
    <div id="toast" class="toast fixed bottom-5 right-5 text-white py-2 px-5 rounded-lg shadow-lg border">Mesaj</div>

    <!-- Düzenleme Modalı -->
    <div id="edit-modal" class="modal items-center justify-center p-4">
        <div class="modal-content glass-card rounded-2xl shadow-2xl p-8 w-full max-w-lg">
            <h2 class="text-2xl font-semibold mb-4 text-white">Yayıncıyı Düzenle</h2>
            <form id="edit-streamer-form" class="space-y-4">
                <input type="hidden" name="slug">
                <div>
                    <label class="block text-sm mb-1 text-gray-300">Görünen Metin</label>
                    <input type="text" name="displayText" class="input" placeholder="Görünen metin" required>
                </div>
                <div class="grid grid-2" style="gap:12px;">
                    <div>
                        <label class="block text-sm mb-1 text-gray-300">Discord Guild ID</label>
                        <input type="text" name="discordGuildId" class="input" placeholder="Discord Guild ID">
                    </div>
                    <div>
                        <label class="block text-sm mb-1 text-gray-300">Discord Role ID</label>
                        <input type="text" name="discordRoleId" class="input" placeholder="Discord Role ID">
                    </div>
                </div>
                <div>
                    <label class="block text-sm mb-1 text-gray-300">Discord Bot Token</label>
                    <input type="text" name="discordBotToken" class="input" placeholder="Discord Bot Token">
                </div>
                <div>
                    <label class="block text-sm mb-1 text-gray-300">Kick broadcaster_user_id (opsiyonel)</label>
                    <input type="text" name="broadcaster_user_id" class="input" placeholder="Kick broadcaster_user_id">
                </div>

                <div class="flex items-center justify-end gap-3">
                    <button type="button" id="edit-cancel" class="btn btn-press">Vazgeç</button>
                    <button type="submit" class="btn btn-primary btn-press">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/script.js"></script>
</body>
</html>
